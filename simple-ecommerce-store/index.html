<html><head><base href="." /><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>EcoShop - Sustainable Products</title>
<style>
:root {
  --primary: #2E7D32;
  --secondary: #81C784;
  --text: #212121;
  --background: #FFFFFF;
  --card: #F5F5F5;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

body {
  background: var(--background);
  color: var(--text);
}

.header {
  background: var(--primary);
  color: white;
  padding: 0.8rem;
  position: sticky;
  top: 0;
  z-index: 100;
}

.nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1200px;
  margin: 0 auto;
}

.search-bar {
  flex: 0 1 200px;
  position: relative;
}

.search-bar input {
  width: 100%;
  padding: 0.5rem 2.5rem 0.5rem 1rem;
  border: none;
  border-radius: 20px;
  outline: none;
}

.cart-icon {
  position: relative;
  cursor: pointer;
}

.cart-count {
  position: absolute;
  top: -8px;
  right: -8px;
  background: var(--secondary);
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.products {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 2rem;
  padding: 1rem;
  padding-bottom: 5rem;
  max-width: 1200px;
  margin: 0 auto;
}

.product-card {
  background: var(--card);
  border-radius: 8px;
  overflow: hidden;
  transition: transform 0.2s;
  cursor: pointer;
}

.product-card:hover {
  transform: translateY(-5px);
}

.product-image {
  width: 100%;
  height: 200px;
  background: var(--secondary);
  display: flex;
  align-items: center;
  justify-content: center;
}

.product-info {
  padding: 1rem;
}

.product-title {
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.product-price {
  color: var(--primary);
  font-weight: 700;
}

.add-to-cart {
  background: var(--primary);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
  width: 100%;
  margin-top: 1rem;
  transition: background 0.2s;
}

.add-to-cart:hover {
  background: var(--secondary);
}

.cart-modal {
  position: fixed;
  top: 0;
  right: 0;
  width: 300px;
  height: 100vh;
  background: white;
  box-shadow: -2px 0 5px rgba(0,0,0,0.1);
  transform: translateX(100%);
  transition: transform 0.3s;
  z-index: 1000;
}

.cart-modal.open {
  transform: translateX(0);
}

.cart-header {
  padding: 1rem;
  background: var(--primary);
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.cart-items {
  padding: 1rem;
  overflow-y: auto;
  max-height: calc(100vh - 160px);
}

.cart-item {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #eee;
}

.cart-total {
  padding: 1rem;
  border-top: 1px solid #eee;
  font-weight: 700;
}

.checkout-btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 1rem;
  width: 100%;
  cursor: pointer;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.product-card {
  animation: fadeIn 0.5s ease-out;
}

/* Adding new mobile navigation styles */
.mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--primary);
  padding: 0.8rem;
  display: flex;
  justify-content: space-around;
  align-items: center;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
  z-index: 100;
}

.mobile-nav-item {
  color: white;
  text-decoration: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 0.8rem;
}

.mobile-nav-item svg {
  margin-bottom: 0.3rem;
}

.mobile-nav-item.active {
  color: var(--secondary);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .products {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 1rem;
    padding: 1rem;
  }

  .product-card {
    font-size: 0.9rem;
  }

  .cart-modal {
    width: 100%;
  }
}
</style>
</head>
<body>

<header class="header">
  <nav class="nav">
    <h1>EcoShop</h1>
    <div class="search-bar">
      <input type="text" placeholder="Search products..." id="search">
    </div>
    <div class="cart-icon" id="cartToggle">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
      </svg>
      <span class="cart-count" id="cartCount">0</span>
    </div>
  </nav>
</header>

<main class="products" id="products"></main>

<nav class="mobile-nav">
  <a href="#" class="mobile-nav-item active" id="nav-home">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    </svg>
    Home
  </a>
  <a href="#" class="mobile-nav-item" id="nav-categories">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
    </svg>
    Categories
  </a>
  <a href="#" class="mobile-nav-item" id="nav-profile">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
    </svg>
    Profile
  </a>
</nav>

<div class="cart-modal" id="cartModal">
  <div class="cart-header">
    <h2>Your Cart</h2>
    <button id="closeCart" style="background:none;border:none;color:white;cursor:pointer">✕</button>
  </div>
  <div class="cart-items" id="cartItems"></div>
  <div class="cart-total">Total: $<span id="cartTotal">0.00</span></div>
  <button class="checkout-btn" id="checkout">Proceed to Checkout</button>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
const products = [
  {
    id: 1,
    name: "Eco-Friendly Water Bottle",
    price: 24.99,
    description: "Sustainable stainless steel water bottle",
    image: "https://images.unsplash.com/photo-1602143407151-7111542de6e8?w=500",
    longDescription: "Made from premium quality stainless steel, this eco-friendly water bottle keeps your drinks cold for 24 hours or hot for 12 hours. Perfect for everyday use and outdoor activities."
  },
  {
    id: 2,
    name: "Bamboo Utensil Set",
    price: 18.99,
    description: "Reusable bamboo cutlery set",
    image: "https://images.unsplash.com/photo-1584346133934-a3e5a39522e5?w=500",
    longDescription: "Handcrafted bamboo utensil set including fork, knife, spoon and chopsticks. Comes with a convenient carrying case. Perfect for travel and reducing plastic waste."
  },
  {
    id: 3,
    name: "Organic Cotton Tote",
    price: 15.99,
    description: "100% organic cotton shopping bag",
    image: "https://images.unsplash.com/photo-1597836228306-335eb0b3f0fd?w=500",
    longDescription: "Durable and stylish organic cotton tote bag. Features reinforced handles and a spacious interior. Perfect for shopping, beach trips, or everyday use."
  },
  {
    id: 4,
    name: "Beeswax Food Wraps",
    price: 22.99,
    description: "Natural alternative to plastic wrap",
    image: "https://images.unsplash.com/photo-1621844504025-76fb06055d4b?w=500",
    longDescription: "Reusable food wraps made from organic cotton and beeswax. Set includes 3 different sizes. Perfect for keeping food fresh without using plastic."
  }
];

let cart = [];

// Initialize Stripe
const stripe = Stripe('your_publishable_key');

function renderProducts(products) {
  const productsContainer = document.getElementById('products');
  productsContainer.innerHTML = products.map(product => `
    <div class="product-card" onclick="showProductModal(${product.id})">
      <div class="product-image">
        <img 
          src="${product.image}" 
          alt="${product.name}"
          style="width:100%;height:100%;object-fit:cover;"
        >
      </div>
      <div class="product-info">
        <h3 class="product-title">${product.name}</h3>
        <p>${product.description}</p>
        <div class="product-price">${product.price.toFixed(2)}</div>
        <button class="add-to-cart" onclick="event.stopPropagation();addToCart(${product.id})">
          Add to Cart
        </button>
      </div>
    </div>
  `).join('');
}

function getProductIcon(type) {
  const icons = {
    bottle: `<path d="M20,10V8h-4V4h-2v4h-4v2h4v12h2V10H20z" fill="#81C784"/>`,
    utensils: `<path d="M11,9H9V2H7v7H5V2H3v7c0,2.12,1.66,3.84,3.75,3.97V22h2.5v-9.03C11.34,12.84,13,11.12,13,9V2h-2V9z" fill="#81C784"/>`,
    tote: `<path d="M18,6h-2c0-2.21-1.79-4-4-4S8,3.79,8,6H6C4.9,6,4,6.9,4,8v12c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V8C20,6.9,19.1,6,18,6z M12,4c1.1,0,2,0.9,2,2h-4C10,4.9,10.9,4,12,4z" fill="#81C784"/>`,
    wraps: `<path d="M21,5c-1.11-0.35-2.33-0.5-3.5-0.5c-1.95,0-4.05,0.4-5.5,1.5c-1.45-1.1-3.55-1.5-5.5-1.5S2.45,4.9,1,6v14.65 c0,0.25,0.25,0.5,0.5,0.5c0.1,0,0.15-0.05,0.25-0.05C3.1,20.45,5.05,20,6.5,20c1.95,0,4.05,0.4,5.5,1.5c1.35-0.85,3.8-1.5,5.5-1.5 c1.65,0,3.35,0.3,4.75,1.05c0.1,0.05,0.15,0.05,0.25,0.05c0.25,0,0.5-0.25,0.5-0.5V6C22.4,5.55,21.75,5.25,21,5z M3,18.5V7 c1.1-0.35,2.3-0.5,3.5-0.5c1.34,0,3.13,0.41,4.5,0.99v11.5C9.63,18.41,7.84,18,6.5,18C5.3,18,4.1,18.15,3,18.5z M21,18.5 c-1.1-0.35-2.3-0.5-3.5-0.5c-1.34,0-3.13,0.41-4.5,0.99V7.49c1.37-0.59,3.16-0.99,4.5-0.99c1.2,0,2.4,0.15,3.5,0.5V18.5z" fill="#81C784"/>`,
  };
  return icons[type] || icons.tote;
}

function addToCart(productId) {
  const product = products.find(p => p.id === productId);
  const existingItem = cart.find(item => item.id === productId);
  
  if (existingItem) {
    existingItem.quantity += 1;
  } else {
    cart.push({...product, quantity: 1});
  }
  
  updateCartUI();
}

function updateCartUI() {
  const cartCount = document.getElementById('cartCount');
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  cartCount.textContent = totalItems;
  
  cartItems.innerHTML = cart.map(item => `
    <div class="cart-item">
      <div class="cart-item-image">
        <svg width="50" height="50" viewBox="0 0 100 100">
          ${getProductIcon(item.image)}
        </svg>
      </div>
      <div>
        <h4>${item.name}</h4>
        <p>$${item.price.toFixed(2)} x ${item.quantity}</p>
        <button onclick="removeFromCart(${item.id})" style="color:red;background:none;border:none;cursor:pointer">Remove</button>
      </div>
    </div>
  `).join('');
  
  const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  cartTotal.textContent = total.toFixed(2);
}

function removeFromCart(productId) {
  cart = cart.filter(item => item.id !== productId);
  updateCartUI();
}

// Cart toggle functionality
const cartModal = document.getElementById('cartModal');
const cartToggle = document.getElementById('cartToggle');
const closeCart = document.getElementById('closeCart');

cartToggle.addEventListener('click', () => {
  cartModal.classList.add('open');
});

closeCart.addEventListener('click', () => {
  cartModal.classList.remove('open');
});

// Search functionality
const searchInput = document.getElementById('search');
searchInput.addEventListener('input', (e) => {
  const searchTerm = e.target.value.toLowerCase();
  const filteredProducts = products.filter(product => 
    product.name.toLowerCase().includes(searchTerm) ||
    product.description.toLowerCase().includes(searchTerm)
  );
  renderProducts(filteredProducts);
});

// Checkout handler
document.getElementById('checkout').addEventListener('click', async () => {
  try {
    // Here you would typically make an API call to your backend
    // to create a Stripe session and redirect to Stripe Checkout
    alert('Redirecting to checkout...');
  } catch (error) {
    console.error('Error during checkout:', error);
    alert('There was an error processing your payment. Please try again.');
  }
});

// Mobile navigation functionality
const navItems = document.querySelectorAll('.mobile-nav-item');

navItems.forEach(item => {
  item.addEventListener('click', (e) => {
    e.preventDefault();
    navItems.forEach(nav => nav.classList.remove('active'));
    item.classList.add('active');
    
    // Handle navigation actions
    switch(item.id) {
      case 'nav-home':
        renderProducts(products);
        break;
      case 'nav-categories':
        // Add categories functionality
        alert('Categories coming soon!');
        break;
      case 'nav-profile':
        // Add profile functionality
        alert('Profile coming soon!');
        break;
    }
  });
});

// Modal functions
function showProductModal(productId) {
  const product = products.find(p => p.id === productId);
  const modal = document.getElementById('productModal');
  const content = document.getElementById('productModalContent');
  
  if (!modal || !content || !product) {
    console.error('Required elements not found');
    return;
  }
  
  content.innerHTML = `
    <img 
      src="${product.image}" 
      alt="${product.name}"
      style="width:100%;height:300px;object-fit:cover;border-radius:8px;"
    >
    <h2 style="margin:20px 0">${product.name}</h2>
    <p style="color:#666;margin-bottom:20px">${product.longDescription}</p>
    <div style="display:flex;justify-content:space-between;align-items:center;margin:20px 0">
      <div style="font-size:24px;font-weight:bold;color:var(--primary)">${product.price.toFixed(2)}</div>
      <button class="add-to-cart" style="width:auto" onclick="addToCart(${product.id})">
        Add to Cart
      </button>
    </div>
  `;
  
  modal.style.display = 'block';
}

function closeProductModal() {
  const modal = document.getElementById('productModal');
  if (modal) {
    modal.style.display = 'none';
  }
}

// Close modal when clicking outside
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('productModal');
  if (modal) {
    modal.addEventListener('click', function(e) {
      if (e.target === this) {
        closeProductModal();
      }
    });
  }
});

// Initial render
document.addEventListener('DOMContentLoaded', function() {
  renderProducts(products);
});
</script>

<div id="productModal" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:1001;">
  <div style="position:relative;background:white;max-width:600px;margin:20px auto;padding:20px;border-radius:8px;max-height:90vh;overflow-y:auto;">
    <button onclick="closeProductModal()" style="position:absolute;right:10px;top:10px;background:none;border:none;font-size:24px;cursor:pointer;">×</button>
    <div id="productModalContent"></div>
  </div>
</div>

</body></html>
